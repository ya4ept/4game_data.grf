

tblLapineUpgradeBox = {			
	
	targets = {			
		[ [[EP17_1_SPC05]] ] = {		
			ItemID = 23776,	
			NeedRefineMin = 0,	
			NeedOptionNumMin = 0,	
			NotSocketEnchantItem = true;	
			TargetItems = {	
				{ [[Cannon_Rapier_OS]], 13493, },
				{ [[Beam_Claymore_OS]], 21047, },
				{ [[Rutilus_Stick_OS]], 26151, },
				{ [[Circuit_Board_OS]], 28629, },
				{ [[Blasti_OS]], 28136, },
				{ [[Saphir_Hall_OS]], 16088, },
				{ [[Virtual_Bow_OS]], 18178, },
				{ [[MH_P89_OS]], 18179, },
				{ [[Meuchler_OS]], 28038, },
				{ [[Burning_Knuckle_OS]], 1862, },
				{ [[HR_S55_OS]], 28253, },
				{ [[Kuroiro_OS]], 28755, },
				{ [[AC_B44_OS]], 18180, },
				{ [[Boost_Lance_OS]], 32019, },
				{ [[Ultio_Spes_OS]], 16089, },
				{ [[ElectricFox_OS]], 26164, },
			},	
			NeedSource_String = [[OS무기]],	
		},		
				
		[ [[EP17_1_SPC06]] ] = {		
			ItemID = 23777,	
			NeedRefineMin = 0,	
			NeedOptionNumMin = 0,	
			NotSocketEnchantItem = true;	
			TargetItems = {	
				{ [[Cannon_Rapier_OS]], 13493, },
				{ [[Beam_Claymore_OS]], 21047, },
				{ [[Rutilus_Stick_OS]], 26151, },
				{ [[Circuit_Board_OS]], 28629, },
				{ [[Blasti_OS]], 28136, },
				{ [[Saphir_Hall_OS]], 16088, },
				{ [[Virtual_Bow_OS]], 18178, },
				{ [[MH_P89_OS]], 18179, },
				{ [[Meuchler_OS]], 28038, },
				{ [[Burning_Knuckle_OS]], 1862, },
				{ [[HR_S55_OS]], 28253, },
				{ [[Kuroiro_OS]], 28755, },
				{ [[AC_B44_OS]], 18180, },
				{ [[Boost_Lance_OS]], 32019, },
				{ [[Ultio_Spes_OS]], 16089, },
				{ [[ElectricFox_OS]], 26164, },
			},	
			NeedSource_String = [[OS무기]],	
		},		

		[ [[EP17_1_SPC07]] ] = {		
			ItemID = 23778,	
			NeedRefineMin = 0,	
			NeedOptionNumMin = 0,	
			NotSocketEnchantItem = true;	
			TargetItems = {	
				{ [[Cannon_Rapier_OS]], 13493, },
				{ [[Beam_Claymore_OS]], 21047, },
				{ [[Rutilus_Stick_OS]], 26151, },
				{ [[Circuit_Board_OS]], 28629, },
				{ [[Blasti_OS]], 28136, },
				{ [[Saphir_Hall_OS]], 16088, },
				{ [[Virtual_Bow_OS]], 18178, },
				{ [[MH_P89_OS]], 18179, },
				{ [[Meuchler_OS]], 28038, },
				{ [[Burning_Knuckle_OS]], 1862, },
				{ [[HR_S55_OS]], 28253, },
				{ [[Kuroiro_OS]], 28755, },
				{ [[AC_B44_OS]], 18180, },
				{ [[Boost_Lance_OS]], 32019, },
				{ [[Ultio_Spes_OS]], 16089, },
				{ [[ElectricFox_OS]], 26164, },
			},	
			NeedSource_String = [[OS무기]],	
		},		
				
		[ [[EP17_1_SPC08]] ] = {		
			ItemID = 23779,	
			NeedRefineMin = 0,	
			NeedOptionNumMin = 0,	
			NotSocketEnchantItem = true;	
			TargetItems = {	
				{ [[Cannon_Rapier_OS]], 13493, },
				{ [[Beam_Claymore_OS]], 21047, },
				{ [[Rutilus_Stick_OS]], 26151, },
				{ [[Circuit_Board_OS]], 28629, },
				{ [[Blasti_OS]], 28136, },
				{ [[Saphir_Hall_OS]], 16088, },
				{ [[Virtual_Bow_OS]], 18178, },
				{ [[MH_P89_OS]], 18179, },
				{ [[Meuchler_OS]], 28038, },
				{ [[Burning_Knuckle_OS]], 1862, },
				{ [[HR_S55_OS]], 28253, },
				{ [[Kuroiro_OS]], 28755, },
				{ [[AC_B44_OS]], 18180, },
				{ [[Boost_Lance_OS]], 32019, },
				{ [[Ultio_Spes_OS]], 16089, },
				{ [[ElectricFox_OS]], 26164, },
			},	
			NeedSource_String = [[OS무기]],	
		},		
				
		[ [[EP17_1_SPC09]] ] = {		
			ItemID = 23780,	
			NeedRefineMin = 0,	
			NeedOptionNumMin = 0,	
			NotSocketEnchantItem = true;	
			TargetItems = {	
				{ [[Cannon_Rapier_OS]], 13493, },
				{ [[Beam_Claymore_OS]], 21047, },
				{ [[Rutilus_Stick_OS]], 26151, },
				{ [[Circuit_Board_OS]], 28629, },
				{ [[Blasti_OS]], 28136, },
				{ [[Saphir_Hall_OS]], 16088, },
				{ [[Virtual_Bow_OS]], 18178, },
				{ [[MH_P89_OS]], 18179, },
				{ [[Meuchler_OS]], 28038, },
				{ [[Burning_Knuckle_OS]], 1862, },
				{ [[HR_S55_OS]], 28253, },
				{ [[Kuroiro_OS]], 28755, },
				{ [[AC_B44_OS]], 18180, },
				{ [[Boost_Lance_OS]], 32019, },
				{ [[Ultio_Spes_OS]], 16089, },
				{ [[ElectricFox_OS]], 26164, },
			},	
			NeedSource_String = [[OS무기]],	
		},		
				
		[ [[EP17_1_SPC10]] ] = {		
			ItemID = 23781,	
			NeedRefineMin = 0,	
			NeedOptionNumMin = 0,	
			NotSocketEnchantItem = true;	
			TargetItems = {	
				{ [[Cannon_Rapier_OS]], 13493, },
				{ [[Beam_Claymore_OS]], 21047, },
				{ [[Rutilus_Stick_OS]], 26151, },
				{ [[Circuit_Board_OS]], 28629, },
				{ [[Blasti_OS]], 28136, },
				{ [[Saphir_Hall_OS]], 16088, },
				{ [[Virtual_Bow_OS]], 18178, },
				{ [[MH_P89_OS]], 18179, },
				{ [[Meuchler_OS]], 28038, },
				{ [[Burning_Knuckle_OS]], 1862, },
				{ [[HR_S55_OS]], 28253, },
				{ [[Kuroiro_OS]], 28755, },
				{ [[AC_B44_OS]], 18180, },
				{ [[Boost_Lance_OS]], 32019, },
				{ [[Ultio_Spes_OS]], 16089, },
				{ [[ElectricFox_OS]], 26164, },
			},	
			NeedSource_String = [[OS무기]],	
		},		

	},			
	
	serverMain = function()
		for ScrollItemID, info in pairs( tblLapineUpgradeBox.targets ) do		
			result, msg = registerLapineUpgradeBoxTargetInfo( info.TargetItems, info.NotSocketEnchantItem, info.NeedOptionNumMin, info.NeedRefineMin, ScrollItemID );	
			if( not result ) then return false, msg;	
			end	
		end		
			
		for ScrollItemID, info in pairs( tblLapineUpgradeBox.results ) do		
			result, msg = registerLapineUpgradeBoxResultInfo( info.FailureItems, info.RefineProbability, info.RandomOptionCode, info.SuccessRate, ScrollItemID );	
			if( not result ) then return false, msg;	
			end	
		end		
			
		return true, "success"
	end,		
	
	
	-- 클라이언트 함수

	--==========================================
	-- function : get_lapine_box
	-- descript : 박스 item id 로 박스 source 정보 얻기
	-- returns : sources
	--==========================================
	get_lapine_box = function( in_box_id )

		for box_name, box_info in pairs( tblLapineUpgradeBox.targets ) do
			if box_info.ItemID == in_box_id then
				return box_info
			end
		end

		return nil

	end,
	

	--==========================================
	-- function : get_min_need_refine
	-- descript : 조합에 필요한 최소 제련도를 return
	-- returns : int
	--==========================================
	get_min_need_refine = function( in_box_id )

		local box = tblLapineUpgradeBox.get_lapine_box( in_box_id )
		if nil ~= box then
			return box.NeedRefineMin
		end

		return 0

	end,


	--==========================================
	-- function : get_min_need_option_num
	-- descript : 조합에 필요한 옵션 (최소) 종류수를 return
	-- returns : int
	--==========================================
	get_min_need_option_num = function( in_box_id )

		local box = tblLapineUpgradeBox.get_lapine_box( in_box_id )
		if nil ~= box then
			return box.NeedOptionNumMin
		end

		return 0

	end,


	--==========================================
	-- function : get_need_source_string
	-- descript : 조합에 필요한 조건(string)
	-- returns : string
	--==========================================
	get_need_source_string = function( in_box_id )

		local box = tblLapineUpgradeBox.get_lapine_box( in_box_id )
		if nil ~= box then
			return box.NeedSource_String
		end

		return 0

	end,

	--==========================================
	-- function : set_resource_item_list
	-- descript : 조합에 필요한 아이템 정보를 추가
	-- returns : void
	--==========================================
	set_resource_item_list = function( in_box_id )
	
		local box = tblLapineUpgradeBox.get_lapine_box( in_box_id )
		if nil ~= box then
			for k, v in pairs( box.TargetItems ) do
					add_ingredient_lapine_upgrade_box(v[2])
			end
		end

	end,
	

};			
